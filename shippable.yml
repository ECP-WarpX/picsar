build:

  pre_ci:
    docker build -no-cache -t warp:tip .

  pre_ci_boot:
    image_name: picsar
    image_tag: tip
    pull: false

  ci:
    # Compile the unit tests
    - make build_test
    # Run the unit test
    - make test_gcov
    # Compile the Fortran kernel of Picsar
    - make clean
    - make
    # Run the tests for Picsar Fortran
    - cd Acceptance_testing/Fortran_tests/test_Langmuir_wave
    - py.test -s --ttest=0 --trun=1 --tshow=0
    # Compile Picsar for Python
    - make -f Makefile_Forthon

